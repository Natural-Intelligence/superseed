# super-seed

Smart seed generation

# Install

```
npm i super-seed
```

# Usage

```js
const {Seeder, SeedJob} = require('super-seed');
const peopleSeeder = new SeedJob(<key>, <generartor>, <seeder>);

const seeder = new Seeder();
seeder.addJob(peopleSeeder, 2);
const data = await seeder.seed();
```


# Data Sources

Data sources define the target source for the data generated by seeds

## MongoDB Datasource

The Mongo DB data souce allow storage of seeds to MongoDB

*Example:*

```js
const {Seeder, SeedJob} = require('super-seed');
const MongoDBSource = require('super-seed-mongodb');
const {BaseMockGenerator} = require('super-seed-core');

class MyGenerator extends BaseMockGenerator {
  generate(db, count) {
    return [...Array(count).keys()].map(() => ({
      name: 'test'
    }));
  }
}
const peopleSeeder = new SeedJob('users', new MyGenerator(), mongodbSource.collection('users'));

const seeder = new Seeder();
seeder.addJob(peopleSeeder, 1);
const data = await seeder.seed();
    
```

## Rest API Datasource
```js

const {Seeder, SeedJob} = require('super-seed');
const APISource = require('super-seed-restapi');
const {BaseMockGenerator} = require('super-seed-core');

const myService = new APISource({
  baseURL: 'http://localhost:1234/api/v1',
  responseHandler
});

const myEntity = myService.defineEntity({
  basePath: '/entities',
  name: 'Entity'
});

class MyGenerator extends BaseMockGenerator {
  generate(db, count) {
    return [...Array(count).keys()].map(() => ({
      name: 'test'
    }));
  }
}
const peopleSeeder = new SeedJob('users', new MyGenerator(), mongodbSource.collection('users'));

const seeder = new Seeder();
seeder.addJob(peopleSeeder, 1);
const data = await seeder.seed();

```

# TO DO
- eslint
- mock generators: mongoose, mock-data-generator
- cli tool
- auto publish 
- API improvement
